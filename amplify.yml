version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci --cache .npm --prefer-offline
    build:
      commands:
        - npm run build
      environment:
        GEMINI_API_KEY: $GEMINI_API_KEY
        MONGODB_URI: $MONGODB_URI
        HUGGINGFACE_API_KEY: $HUGGINGFACE_API_KEY
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
  cache:
    paths:
      - .next/cache/**/*
      - .npm/**/*
compute:
  type: SSR
  timeout: 300
  memory: 2048
